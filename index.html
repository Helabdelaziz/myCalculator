<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <style>
    .hide {
      display: none;
    }
    .error {
      color: red;
      font-size: 0.8em;
      font-family: sans-serif;
      font-style: italic;
    }
    input {
      border-color: #ddd;
      width: 400px;
      display: block;
      font-size: 1.8em;
    }
  </style>
  <body>
    <form name="myForm">
      Email:
      <input type="text" name="email" /><span class="error"></span>
      <br />Password <input type="password" name="password" /><span
        class="error"
      ></span>
      <br />Username: <input type="text" name="uname" /><span
        class="error"
      ></span>
      <br />
      <input type="submit" value="Sign-up" />
    </form>
  </body>
  <script>
    let email = document.querySelector("input[name=email]");
    let password = document.querySelector("input[name=password]");
    let userName = document.querySelector("input[name=uname]");
    let btn = document.querySelector("input[type=submit]");
    let err = document.querySelectorAll("span[class=error]");
    let formData = {};

    btn.addEventListener("click", (e) => {
      if (handleErr()) {
        e.preventDefault();
      }
    });
    err.forEach((element) => {
      element.classList.add("hide");
    });

    function validateEmail() {
      let emailRegex = /([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi;
      let matchEmail = email.value.match(emailRegex);
      return matchEmail;
    }

    function validatePassword() {
      let passwordRegex = /([a-zA-Z0-9])/gi;
      let matchPassword = password.value.match(passwordRegex);
      return matchPassword;
    }

    function handleErr() {
      let err = false;
      if (!validateEmail()) {
        err = true;
        email.focus();
        let emailErr = email.nextElementSibling;
        emailErr.classList.remove("hide");
        emailErr.classList.add("error");
        emailErr.innerText = "This email is invalid";
      } else {
        formData["email"] = email.value;
      }
      if (!validatePassword()) {
        err = true;
        password.focus();
        let passwordErr = password.nextElementSibling;
        passwordErr.classList.remove("hide");
        passwordErr.classList.add("error");
        passwordErr.innerText = "This password is invalid";
      } else {
        formData["password"] = password.value;
      }
      if (userName.value == "") {
        err = true;
        userName.focus();
        let userNameErr = userName.nextElementSibling;
        userNameErr.classList.remove("hide");
        userNameErr.classList.add("error");
        userNameErr.innerText = "This userName is invalid";
      } else {
        formData["userName"] = userName.value;
      }
      return err;
    }
  </script>
</html>
